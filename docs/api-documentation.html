<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>Robotics Tournament API Documentation</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
            
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}

</style>
        
        </head>
        <body class="vscode-body vscode-light">
            <h1 id="robotics-tournament-api-documentation">Robotics Tournament API Documentation</h1>
<h2 id="overview">Overview</h2>
<p>This API provides endpoints for managing robotics tournaments, including users, teams, tournaments, stages, and matches. The API follows RESTful principles and uses JSON for data exchange.</p>
<p><strong>Base URL</strong>: <code>http://localhost:3000/api</code></p>
<p><strong>API Documentation</strong>: <code>/api/docs</code> (Swagger UI)</p>
<h2 id="authentication">Authentication</h2>
<p>The API uses JWT (JSON Web Token) based authentication to secure endpoints and implement role-based access control.</p>
<h3 id="authentication-flow">Authentication Flow</h3>
<ol>
<li>Register a user account or use the default admin account</li>
<li>Login with your credentials to receive a JWT token</li>
<li>Include this token in subsequent requests as a Bearer token in the Authorization header</li>
</ol>
<h3 id="default-admin-account">Default Admin Account</h3>
<p>For initial setup, a default admin account is automatically created when the application starts:</p>
<ul>
<li><strong>Username</strong>: <code>admin</code></li>
<li><strong>Password</strong>: <code>admin123</code></li>
<li><strong>Role</strong>: <code>ADMIN</code></li>
</ul>
<p>It's recommended to change the admin password after first login for security purposes.</p>
<h3 id="authentication-endpoints">Authentication Endpoints</h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>POST</td>
<td><code>/auth/register</code></td>
<td>Register a new user</td>
</tr>
<tr>
<td>POST</td>
<td><code>/auth/login</code></td>
<td>Login and receive JWT token</td>
</tr>
<tr>
<td>GET</td>
<td><code>/auth/init-admin</code></td>
<td>Initialize default admin (only needed if admin account is missing)</td>
</tr>
<tr>
<td>GET</td>
<td><code>/auth/check-auth</code></td>
<td>Check if authentication is working (requires token)</td>
</tr>
<tr>
<td>GET</td>
<td><code>/auth/check-admin</code></td>
<td>Check if your admin role permissions are working (requires admin token)</td>
</tr>
</tbody>
</table>
<h4 id="register">Register</h4>
<ul>
<li><strong>Endpoint</strong>: <code>POST /api/auth/register</code></li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span> <span class="hljs-comment">// optional</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Response</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;COMMON&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;createdAt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;timestamp&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ul>
<h4 id="login">Login</h4>
<ul>
<li><strong>Endpoint</strong>: <code>POST /api/auth/login</code></li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Response</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;access_token&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;JWT_TOKEN_STRING&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;user&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ADMIN | HEAD_REFEREE | ALLIANCE_REFEREE | COMMON&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ul>
<h4 id="check-authentication">Check Authentication</h4>
<ul>
<li><strong>Endpoint</strong>: <code>GET /api/auth/check-auth</code></li>
<li><strong>Headers</strong>:<pre><code>Authorization: Bearer YOUR_JWT_TOKEN
</code></pre>
</li>
<li><strong>Response</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;authenticated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;user&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Your authentication is working correctly&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ul>
<h4 id="check-admin-access">Check Admin Access</h4>
<ul>
<li><strong>Endpoint</strong>: <code>GET /api/auth/check-admin</code></li>
<li><strong>Headers</strong>:<pre><code>Authorization: Bearer YOUR_JWT_TOKEN
</code></pre>
</li>
<li><strong>Response</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;authenticated&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ADMIN&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;hasAdminAccess&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Your ADMIN role is working correctly&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Error Response</strong> (if not admin):<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;statusCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">401</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;User with role XXX does not have permission to access this resource&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;error&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Unauthorized&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ul>
<h3 id="using-jwt-tokens">Using JWT Tokens</h3>
<p>Include the JWT token in the Authorization header for protected API requests:</p>
<pre><code>Authorization: Bearer YOUR_JWT_TOKEN
</code></pre>
<h4 id="important-notes-on-jwt-authentication">Important Notes on JWT Authentication</h4>
<ol>
<li><strong>Token Format</strong>: Always include the &quot;Bearer &quot; prefix before your token</li>
<li><strong>Token Validity</strong>: Tokens have a limited lifespan and will expire</li>
<li><strong>Authentication Headers</strong>: Some API testing tools require you to set the token in a specific auth section rather than manually in headers</li>
</ol>
<h3 id="troubleshooting-authentication">Troubleshooting Authentication</h3>
<p>If you encounter &quot;Unauthorized&quot; errors when attempting to access protected endpoints:</p>
<ol>
<li><strong>Check your token</strong> - Make sure it's valid and not expired</li>
<li><strong>Verify header format</strong> - Ensure you're using <code>Authorization: Bearer YOUR_TOKEN</code></li>
<li><strong>Verify role permissions</strong> - Use <code>/api/auth/check-admin</code> to confirm your admin privileges</li>
<li><strong>Regenerate token</strong> - Log in again to get a fresh token if needed</li>
</ol>
<h3 id="role-based-permissions">Role-Based Permissions</h3>
<p>The API implements role-based access control with the following roles:</p>
<table>
<thead>
<tr>
<th>Role</th>
<th>Permissions</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADMIN</td>
<td>Full access to all resources (create, read, update, delete)</td>
</tr>
<tr>
<td>HEAD_REFEREE</td>
<td>Currently limited access (more permissions to be configured)</td>
</tr>
<tr>
<td>ALLIANCE_REFEREE</td>
<td>Currently limited access (more permissions to be configured)</td>
</tr>
<tr>
<td>COMMON</td>
<td>Read-only access to resources</td>
</tr>
</tbody>
</table>
<p><strong>Important</strong>: Currently, only users with the <strong>ADMIN</strong> role can modify matches, stages, tournaments, teams, and users. Other role permissions will be configured in future updates.</p>
<h2 id="common-response-codes">Common Response Codes</h2>
<ul>
<li><code>200 OK</code>: Request successful</li>
<li><code>201 Created</code>: Resource created successfully</li>
<li><code>400 Bad Request</code>: Invalid request parameters</li>
<li><code>401 Unauthorized</code>: Authentication token is missing or invalid</li>
<li><code>403 Forbidden</code>: User does not have permission to perform the action</li>
<li><code>404 Not Found</code>: Resource not found</li>
<li><code>500 Internal Server Error</code>: Server error</li>
</ul>
<h2 id="api-endpoints">API Endpoints</h2>
<h3 id="users">Users</h3>
<p>Base path: <code>/api/users</code></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
<th>Required Role</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/users</code></td>
<td>List all users</td>
<td>Any role</td>
</tr>
<tr>
<td>GET</td>
<td><code>/users/:id</code></td>
<td>Get a specific user by ID</td>
<td>Any role</td>
</tr>
<tr>
<td>POST</td>
<td><code>/users</code></td>
<td>Create a new user</td>
<td>ADMIN</td>
</tr>
<tr>
<td>PATCH</td>
<td><code>/users/:id</code></td>
<td>Update a user</td>
<td>ADMIN</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/users/:id</code></td>
<td>Delete a user</td>
<td>ADMIN</td>
</tr>
</tbody>
</table>
<h4 id="create-user">Create User</h4>
<ul>
<li><strong>Endpoint</strong>: <code>POST /api/users</code></li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Response</strong>: Created user object</li>
</ul>
<h4 id="get-all-users">Get All Users</h4>
<ul>
<li><strong>Endpoint</strong>: <code>GET /api/users</code></li>
<li><strong>Response</strong>: Array of user objects</li>
</ul>
<h4 id="get-user-by-id">Get User by ID</h4>
<ul>
<li><strong>Endpoint</strong>: <code>GET /api/users/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - User ID</li>
<li><strong>Response</strong>: User object</li>
</ul>
<h4 id="update-user">Update User</h4>
<ul>
<li><strong>Endpoint</strong>: <code>PATCH /api/users/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - User ID</li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>    <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>      <span class="hljs-comment">// optional</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Response</strong>: Updated user object</li>
</ul>
<h4 id="delete-user">Delete User</h4>
<ul>
<li><strong>Endpoint</strong>: <code>DELETE /api/users/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - User ID</li>
<li><strong>Response</strong>: Success message or deleted user object</li>
</ul>
<h3 id="teams">Teams</h3>
<p>Base path: <code>/api/teams</code></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
<th>Required Role</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/teams</code></td>
<td>List all teams (can filter by tournamentId)</td>
<td>Any role</td>
</tr>
<tr>
<td>GET</td>
<td><code>/teams/:id</code></td>
<td>Get a specific team by ID</td>
<td>Any role</td>
</tr>
<tr>
<td>POST</td>
<td><code>/teams</code></td>
<td>Create a new team</td>
<td>ADMIN</td>
</tr>
<tr>
<td>POST</td>
<td><code>/teams/import</code></td>
<td>Import multiple teams from CSV/text</td>
<td>ADMIN</td>
</tr>
<tr>
<td>PATCH</td>
<td><code>/teams/:id</code></td>
<td>Update a team</td>
<td>ADMIN</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/teams/:id</code></td>
<td>Delete a team</td>
<td>ADMIN</td>
</tr>
</tbody>
</table>
<h4 id="create-team">Create Team</h4>
<ul>
<li><strong>Endpoint</strong>: <code>POST /api/teams</code></li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;teamNumber&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>          <span class="hljs-comment">// optional, will be auto-generated if not provided (format: 000001)</span>
  <span class="hljs-attr">&quot;organization&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;avatar&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (URL)&quot;</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// optional, URL to team avatar/logo</span>
  <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>         <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;teamMembers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>                 <span class="hljs-comment">// optional, array of team members</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>            <span class="hljs-comment">// optional</span>
      <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>           <span class="hljs-comment">// optional</span>
      <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>            <span class="hljs-comment">// optional</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;tournamentId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (UUID)&quot;</span>  <span class="hljs-comment">// optional, links team to a tournament</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Response</strong>: Created team object with auto-generated teamNumber if not provided</li>
</ul>
<h4 id="get-all-teams">Get All Teams</h4>
<ul>
<li><strong>Endpoint</strong>: <code>GET /api/teams</code></li>
<li><strong>Query Parameters</strong>:
<ul>
<li><code>tournamentId</code> - Optional UUID to filter teams by tournament</li>
</ul>
</li>
<li><strong>Response</strong>: Array of team objects including tournament information</li>
</ul>
<h4 id="get-team-by-id">Get Team by ID</h4>
<ul>
<li><strong>Endpoint</strong>: <code>GET /api/teams/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Team ID</li>
<li><strong>Response</strong>: Team object including tournament and match history</li>
</ul>
<h4 id="update-team">Update Team</h4>
<ul>
<li><strong>Endpoint</strong>: <code>PATCH /api/teams/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Team ID</li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>                <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;teamNumber&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>          <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;organization&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;avatar&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (URL)&quot;</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>         <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;teamMembers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>                 <span class="hljs-comment">// optional</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>            <span class="hljs-comment">// optional</span>
      <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>           <span class="hljs-comment">// optional</span>
      <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>            <span class="hljs-comment">// optional</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;tournamentId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (UUID)&quot;</span>  <span class="hljs-comment">// optional</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Response</strong>: Updated team object</li>
</ul>
<h4 id="delete-team">Delete Team</h4>
<ul>
<li><strong>Endpoint</strong>: <code>DELETE /api/teams/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Team ID</li>
<li><strong>Response</strong>: Deleted team object</li>
</ul>
<h4 id="import-teams">Import Teams</h4>
<ul>
<li><strong>Endpoint</strong>: <code>POST /api/teams/import</code></li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;content&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Team Alpha\nTeam Beta,School XYZ\nTeam Gamma,School ABC,A great team&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;format&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;text&quot;</span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// optional, &quot;csv&quot; or &quot;text&quot;, default: &quot;text&quot;</span>
  <span class="hljs-attr">&quot;hasHeader&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span><span class="hljs-punctuation">,</span>    <span class="hljs-comment">// optional, default: false</span>
  <span class="hljs-attr">&quot;delimiter&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;,&quot;</span>       <span class="hljs-comment">// optional, default: &quot;,&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Notes</strong>:
<ul>
<li>Each line format: <code>&lt;name&gt;,&lt;organization&gt;,&lt;description&gt;</code></li>
<li>Team numbers are auto-generated in format 000001, 000002, etc.</li>
<li>At minimum, only team name is required</li>
</ul>
</li>
<li><strong>Response</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;success&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Successfully imported 3 teams&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;teams&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;uuid&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;teamNumber&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;000001&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Team Alpha&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;organization&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">null</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">null</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;avatar&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">null</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;teamMembers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">null</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;tournamentId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">null</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;createdAt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;timestamp&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;updatedAt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;timestamp&quot;</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// ...more teams</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ul>
<h3 id="tournaments">Tournaments</h3>
<p>Base path: <code>/api/tournaments</code></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
<th>Required Role</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/tournaments</code></td>
<td>List all tournaments</td>
<td>Any role</td>
</tr>
<tr>
<td>GET</td>
<td><code>/tournaments/:id</code></td>
<td>Get a specific tournament by ID</td>
<td>Any role</td>
</tr>
<tr>
<td>POST</td>
<td><code>/tournaments</code></td>
<td>Create a new tournament</td>
<td>ADMIN</td>
</tr>
<tr>
<td>PATCH</td>
<td><code>/tournaments/:id</code></td>
<td>Update a tournament</td>
<td>ADMIN</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/tournaments/:id</code></td>
<td>Delete a tournament</td>
<td>ADMIN</td>
</tr>
</tbody>
</table>
<h4 id="create-tournament">Create Tournament</h4>
<ul>
<li><strong>Endpoint</strong>: <code>POST /api/tournaments</code></li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;startDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (ISO date)&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;endDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (ISO date)&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;adminId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Response</strong>: Created tournament object</li>
</ul>
<h4 id="get-all-tournaments">Get All Tournaments</h4>
<ul>
<li><strong>Endpoint</strong>: <code>GET /api/tournaments</code></li>
<li><strong>Response</strong>: Array of tournament objects with admin information</li>
</ul>
<h4 id="get-tournament-by-id">Get Tournament by ID</h4>
<ul>
<li><strong>Endpoint</strong>: <code>GET /api/tournaments/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Tournament ID</li>
<li><strong>Response</strong>: Tournament object</li>
</ul>
<h4 id="update-tournament">Update Tournament</h4>
<ul>
<li><strong>Endpoint</strong>: <code>PATCH /api/tournaments/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Tournament ID</li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>                <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>         <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;startDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (ISO date)&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;endDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (ISO date)&quot;</span>    <span class="hljs-comment">// optional</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Response</strong>: Updated tournament object</li>
</ul>
<h4 id="delete-tournament">Delete Tournament</h4>
<ul>
<li><strong>Endpoint</strong>: <code>DELETE /api/tournaments/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Tournament ID</li>
<li><strong>Response</strong>: Success message or deleted tournament object</li>
</ul>
<h3 id="stages">Stages</h3>
<p>Base path: <code>/api/stages</code></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
<th>Required Role</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/stages</code></td>
<td>List all stages</td>
<td>Any role</td>
</tr>
<tr>
<td>GET</td>
<td><code>/stages/:id</code></td>
<td>Get a specific stage by ID</td>
<td>Any role</td>
</tr>
<tr>
<td>POST</td>
<td><code>/stages</code></td>
<td>Create a new stage</td>
<td>ADMIN</td>
</tr>
<tr>
<td>PATCH</td>
<td><code>/stages/:id</code></td>
<td>Update a stage</td>
<td>ADMIN</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/stages/:id</code></td>
<td>Delete a stage</td>
<td>ADMIN</td>
</tr>
</tbody>
</table>
<h4 id="create-stage">Create Stage</h4>
<ul>
<li><strong>Endpoint</strong>: <code>POST /api/stages</code></li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;SWISS | PLAYOFF | FINAL&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;startDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (ISO date with time)&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;endDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (ISO date with time)&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;tournamentId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (UUID)&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Important Notes</strong>:
<ul>
<li>Stage dates (startDate and endDate) must be within the tournament's date range</li>
<li>Validation will fail if stage dates are outside tournament dates</li>
</ul>
</li>
<li><strong>Response</strong>: Created stage object</li>
</ul>
<h4 id="get-all-stages">Get All Stages</h4>
<ul>
<li><strong>Endpoint</strong>: <code>GET /api/stages</code></li>
<li><strong>Response</strong>: Array of stage objects with their associated tournaments</li>
</ul>
<h4 id="get-stage-by-id">Get Stage by ID</h4>
<ul>
<li><strong>Endpoint</strong>: <code>GET /api/stages/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Stage ID</li>
<li><strong>Response</strong>: Stage object with tournament and matches data (including alliances and teams)</li>
</ul>
<h4 id="update-stage">Update Stage</h4>
<ul>
<li><strong>Endpoint</strong>: <code>PATCH /api/stages/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Stage ID</li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>                <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;SWISS | PLAYOFF | FINAL&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;startDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (ISO date)&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;endDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (ISO date)&quot;</span>    <span class="hljs-comment">// optional</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Response</strong>: Updated stage object</li>
</ul>
<h4 id="delete-stage">Delete Stage</h4>
<ul>
<li><strong>Endpoint</strong>: <code>DELETE /api/stages/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Stage ID</li>
<li><strong>Response</strong>: Deleted stage object</li>
</ul>
<h3 id="matches">Matches</h3>
<p>Base path: <code>/api/matches</code></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
<th>Required Role</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/matches</code></td>
<td>List all matches</td>
<td>Any role</td>
</tr>
<tr>
<td>GET</td>
<td><code>/matches/:id</code></td>
<td>Get a specific match by ID</td>
<td>Any role</td>
</tr>
<tr>
<td>POST</td>
<td><code>/matches</code></td>
<td>Create a new match</td>
<td>ADMIN</td>
</tr>
<tr>
<td>PATCH</td>
<td><code>/matches/:id</code></td>
<td>Update a match</td>
<td>ADMIN</td>
</tr>
<tr>
<td>PATCH</td>
<td><code>/matches/alliance/:id</code></td>
<td>Update an alliance in a match</td>
<td>ADMIN</td>
</tr>
<tr>
<td>PATCH</td>
<td><code>/matches/scoring/:id</code></td>
<td>Update alliance scoring in a match</td>
<td>ADMIN</td>
</tr>
<tr>
<td>POST</td>
<td><code>/matches/:id/referees</code></td>
<td>Assign referees to a match</td>
<td>ADMIN</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/matches/:id</code></td>
<td>Delete a match</td>
<td>ADMIN</td>
</tr>
</tbody>
</table>
<h4 id="create-match">Create Match</h4>
<ul>
<li><strong>Endpoint</strong>: <code>POST /api/matches</code></li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;matchNumber&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;stageId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (UUID)&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;PENDING | IN_PROGRESS | COMPLETED&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// optional, default: &quot;PENDING&quot;</span>
  <span class="hljs-attr">&quot;startTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (ISO date with time)&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// optional, includes hour-minute precision</span>
  <span class="hljs-attr">&quot;scheduledTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (ISO date with time)&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// optional, planned start time with hour-minute precision</span>
  <span class="hljs-attr">&quot;endTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (ISO date with time)&quot;</span><span class="hljs-punctuation">,</span>    <span class="hljs-comment">// optional, includes hour-minute precision</span>
  <span class="hljs-attr">&quot;duration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// optional, duration in minutes</span>
  <span class="hljs-attr">&quot;alliances&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>   <span class="hljs-comment">// optional</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;color&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;teamIds&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;string (UUID)&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;string (UUID)&quot;</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Response</strong>: Created match object</li>
</ul>
<h4 id="get-all-matches">Get All Matches</h4>
<ul>
<li><strong>Endpoint</strong>: <code>GET /api/matches</code></li>
<li><strong>Response</strong>: Array of match objects</li>
</ul>
<h4 id="get-match-by-id">Get Match by ID</h4>
<ul>
<li><strong>Endpoint</strong>: <code>GET /api/matches/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Match ID</li>
<li><strong>Response</strong>: Match object with alliances, teams, and scoring data</li>
</ul>
<h4 id="update-match">Update Match</h4>
<ul>
<li><strong>Endpoint</strong>: <code>PATCH /api/matches/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Match ID</li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;matchNumber&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>               <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;PENDING | IN_PROGRESS | COMPLETED&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;startTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (ISO date with time)&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;scheduledTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (ISO date with time)&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;endTime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (ISO date with time)&quot;</span><span class="hljs-punctuation">,</span>    <span class="hljs-comment">// optional</span>
  <span class="hljs-attr">&quot;duration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10</span>  <span class="hljs-comment">// optional, duration in minutes</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Response</strong>: Updated match object</li>
</ul>
<h4 id="update-alliance">Update Alliance</h4>
<ul>
<li><strong>Endpoint</strong>: <code>PATCH /api/matches/alliance/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Alliance ID</li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;teamIds&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;string (UUID)&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;string (UUID)&quot;</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Response</strong>: Updated alliance object</li>
</ul>
<h4 id="update-alliance-scoring">Update Alliance Scoring</h4>
<ul>
<li><strong>Endpoint</strong>: <code>PATCH /api/matches/scoring/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Alliance ID</li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;refereeId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (UUID)&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;score&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;scoreDetails&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// optional JSON object with detailed scoring</span>
  <span class="hljs-attr">&quot;card&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;NONE | YELLOW | RED&quot;</span> <span class="hljs-comment">// optional</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Response</strong>: Updated alliance scoring object</li>
</ul>
<h4 id="assign-referees-to-match">Assign Referees to Match</h4>
<ul>
<li><strong>Endpoint</strong>: <code>POST /api/matches/:id/referees</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Match ID</li>
<li><strong>Body</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;referees&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">&quot;userId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string (UUID)&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;role&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;HEAD_REFEREE | ALLIANCE_REFEREE&quot;</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">&quot;position&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;RED1&quot;</span> <span class="hljs-comment">// optional, e.g., &quot;RED1&quot;, &quot;BLUE2&quot;</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>Notes</strong>:
<ul>
<li>Each match should have 1 HEAD_REFEREE and 3-4 ALLIANCE_REFEREE</li>
<li>Position field helps identify the alliance assignment for alliance referees</li>
</ul>
</li>
<li><strong>Response</strong>: Updated match object with referees</li>
</ul>
<h4 id="delete-match">Delete Match</h4>
<ul>
<li><strong>Endpoint</strong>: <code>DELETE /api/matches/:id</code></li>
<li><strong>Parameters</strong>: <code>id</code> - Match ID</li>
<li><strong>Response</strong>: Deleted match object</li>
</ul>
<h2 id="models">Models</h2>
<h3 id="user">User</h3>
<pre><code>{
  id: string
  username: string
  email: string
  role: string
  createdAt: Date
  updatedAt: Date
}
</code></pre>
<h3 id="team">Team</h3>
<pre><code>{
  id: string
  teamNumber: string       // Auto-generated format: 000001
  name: string
  organization: string?
  avatar: string?          // URL to team avatar image
  description: string?     // Team description
  teamMembers: {           // JSON array of team members
    name: string
    role?: string
    email?: string
    phone?: string
  }[]
  tournamentId: string?    // Optional link to tournament
  tournament: Tournament?
  createdAt: Date
  updatedAt: Date
}
</code></pre>
<h3 id="tournament">Tournament</h3>
<pre><code>{
  id: string
  name: string
  description: string
  startDate: Date
  endDate: Date
  adminId: string
  createdAt: Date
  updatedAt: Date
  admin: User
}
</code></pre>
<h3 id="stage">Stage</h3>
<pre><code>{
  id: string
  name: string
  description: string
  tournamentId: string
  order: number
  type: string
  createdAt: Date
  updatedAt: Date
}
</code></pre>
<h3 id="match">Match</h3>
<pre><code>{
  id: string
  matchNumber: number
  stageId: string
  startTime: Date          // Full timestamp with hour-minute precision
  scheduledTime: Date      // Planned start time with hour-minute precision
  endTime: Date            // Full timestamp with hour-minute precision
  duration: number         // Duration in minutes
  status: string
  createdAt: Date
  updatedAt: Date
  alliances: Alliance[]
  referees: MatchReferee[] // Referees assigned to this match
}
</code></pre>
<h3 id="alliance">Alliance</h3>
<pre><code>{
  id: string
  matchId: string
  color: string
  teams: Team[]
  scoring: AllianceScoring
}
</code></pre>
<h3 id="alliancescoring">AllianceScoring</h3>
<pre><code>{
  id: string
  allianceId: string
  score: number
  details: object
  refereeId: string
}
</code></pre>
<h3 id="matchreferee">MatchReferee</h3>
<pre><code>{
  id: string
  matchId: string
  userId: string
  user: User
  role: &quot;HEAD_REFEREE&quot; | &quot;ALLIANCE_REFEREE&quot;
  position: string       // Optional position identifier (e.g. &quot;RED1&quot;, &quot;BLUE2&quot;)
  createdAt: Date
  updatedAt: Date
}
</code></pre>

            
            
        </body>
        </html>